"0","# One-hot encode only for the top genres"
"0","onehot_top10 <- p_data |>"
"0","  mutate(row_id = row_number(),"
"0","         genres = str_split(genres, "",\\s*"")) |>"
"0","  unnest(genres) |>"
"0","  filter(genres %in% top10_genre) |>"
"0","  mutate(dummy = 1) |>"
"0","  pivot_wider("
"0","    id_cols = row_id,"
"0","    names_from = genres,"
"0","    values_from = dummy,"
"0","    values_fill = list(dummy = 0)"
"0","  )"
"1","[1m[33mError[39m in `mutate()`:[22m
[38;5;232m[36mâ„¹[38;5;232m In argument: `genres = str_split(genres, "",\\s*"")`.[39m
[1mCaused by error in `str_split()`:[22m
[33m![39m could not find function ""str_split""
Backtrace:
[90m  1. [39m[1mtidyr[22m::pivot_wider(...)
[90m  6. [39m[1m[94mdplyr:::mutate.data.frame([39m[22mp_data, row_id = row_number(), genres = str_split(genres, "",\\s*"")[1m[94m)[39m[22m
[90m  7. [39mdplyr:::mutate_cols(.data, dplyr_quosures(...), by)
[90m  9. [39mdplyr:::mutate_col(dots[[i]], data, mask, new_columns)
[90m 10. [39mmask$eval_all_mutate(quo)
[90m 11. [39m[1mdplyr[22m (local) eval()
"
